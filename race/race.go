package main

import (
	"fmt"
	"math"
)

type car interface {
	OilLevel()
}

type minOil struct {
	oilLevel uint
}

func (m *minOil) OilLevel() {
	if m.oilLevel != 0 {
		fmt.Printf("minOil should be min Oil Level: %d\n", m.oilLevel)
	}
}

type maxOil struct {
	oilLevel uint
}

func (m *maxOil) OilLevel() {
	if m.oilLevel != math.MaxUint {
		fmt.Printf("maxOil should be max Oil Level: %d\n", m.oilLevel)
	}
}

// interfaces for race
var min car
var max car
var confused car

func main() {
	min = &minOil{oilLevel: 0}
	max = &maxOil{oilLevel: math.MaxUint}
	confused = min

	go func() {
		for i := 0; i < 100000; i++ {
			confused = min
			confused = max
		}
	}()

	for {
		confused.OilLevel()
	}
}
